# Скрипты для анализа красивых мест Москвы

Этот набор скриптов предназначен для сбора, анализа и интеграции данных о красивых местах Москвы в приложение CityStep.

## Структура скриптов

- `collect_moscow_places.py` - скрипт для сбора данных о достопримечательностях Москвы через API OpenStreetMap
- `analyze_moscow_places.py` - скрипт для анализа собранных данных и генерации отчетов
- `integrate_places_to_citystep.js` - скрипт для интеграции данных в приложение CityStep

## Требования

### Python-скрипты
- Python 3.7+
- Библиотеки: requests, matplotlib

Установка зависимостей:
```bash
pip install requests matplotlib
```

### JavaScript-скрипт
- Node.js 14+
- Библиотеки: node-fetch

Установка зависимостей:
```bash
npm install node-fetch
```

## Использование

### 1. Сбор данных о местах Москвы

```bash
python collect_moscow_places.py
```

Скрипт соберет данные о достопримечательностях, кафе, ресторанах, парках и других интересных местах Москвы через API OpenStreetMap. Результаты будут сохранены в файл `data/moscow_places.json`.

Также будет создан SQL-скрипт `data/insert_places.sql` для добавления мест в базу данных.

### 2. Анализ собранных данных

```bash
python analyze_moscow_places.py
```

Скрипт проанализирует собранные данные и создаст:
- Диаграммы распределения мест по типам
- Диаграммы распределения мест по времени посещения
- Карту географического распределения мест
- Текстовый отчет с информацией о местах

Результаты анализа будут сохранены в директории `data/analysis`.

### 3. Интеграция данных в приложение

```bash
node integrate_places_to_citystep.js
```

Скрипт добавит собранные места в базу данных приложения CityStep через API. Для работы скрипта необходимо запустить приложение CityStep локально или указать URL удаленного API.

## Структура данных

Каждое место представлено в формате:

```json
{
  "name": "Название места",
  "description": "Описание места",
  "type": "attraction|cafe|restaurant|shop|park|exhibition",
  "latitude": 55.7539,
  "longitude": 37.6208,
  "estimated_time": 60,
  "image_url": "https://example.com/image.jpg"
}
```

## Интеграция с приложением CityStep

После выполнения всех скриптов, в приложении CityStep будет доступна страница "Места Москвы", где можно:
- Просматривать все собранные места на карте
- Фильтровать места по типам и поисковому запросу
- Получать подробную информацию о каждом месте
- Создавать маршруты, включающие выбранные места

## Примечания

- Скрипт сбора данных использует публичные API OpenStreetMap, которые имеют ограничения на количество запросов. При частом использовании может потребоваться добавление задержек между запросами.
- Для корректной работы скрипта интеграции необходимо настроить переменные окружения:
  - `API_URL` - URL API приложения CityStep
  - `API_KEY` - ключ API для авторизации (если требуется)

## Лицензия

Скрипты распространяются под лицензией MIT.
